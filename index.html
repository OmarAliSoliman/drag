<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    [draggable="true"] {
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }

    ul.moveable {
      list-style: none;
      margin: 0px;
      display: flex;
      padding: 0;
      gap: 10px;
      direction: rtl;
      /* Space between items */
    }

    ul.moveable li {
      margin: 0;
      padding: 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: move;
      display: inline-block;
    }

    ul.moveable li img {
      position: relative;
      display: inline-block;
    }

    ul.moveable li img::after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #ccc;
      content: "";
      opacity: 1;
    }

    ul.moveable li img {
      display: block;
      width: 100px;
      /* Set a fixed size for images */
      height: auto;
      object-fit: contain;
      /* Ensure the image fits within the bounds */
      border-radius: 4px;
    }

    ul.moveable li:hover {
      /* background-color: #eee; */
    }

    @media(max-width: 600px) {
      ul.moveable {
        flex-wrap: wrap;
      }
    }
  </style>
</head>

<body>


  <ul id="items-list" class="moveable">
    <li><input type="hidden" name="arrangement[]" value="146"><img
        src="https://nahr.art4muslim.net/uploads/choices/07xSYaUWtTnYoeQQb0MQZk9SyIC0HW6Fg7UlqWl3.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="149"><img
        src="https://nahr.art4muslim.net/uploads/choices/RE1Kv7WTn6ftoNSTqNFeEkpOmpzneYQhjyEIINLN.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="145"><img
        src="https://nahr.art4muslim.net/uploads/choices/YL9IbgTOnF2SnuFLyULmDSSoyOTwkPY2HTzL0uQ9.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="148"><img
        src="https://nahr.art4muslim.net/uploads/choices/AjR5qOtjM0LgrEw4VONxa28YnHx1ZjhyMEaZCwnS.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="154"><img
        src="https://nahr.art4muslim.net/uploads/choices/JrL4vC7bJSm1CID0Ds7p6mCfxurHx4DZbnsaoD9r.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="153"><img
        src="https://nahr.art4muslim.net/uploads/choices/OEpHbyrY7vo2qX3x0p6dXE32Ysc52TxsCIdM322l.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="147"><img
        src="https://nahr.art4muslim.net/uploads/choices/PxWTZqy2dZrTWb5Ddlnc2nm9v7H6ICphzqYppiw3.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="144"><img
        src="https://nahr.art4muslim.net/uploads/choices/BJtshdBBR3i99Qqy5eNfHT9tPLdnKjsMkMBpzh9O.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="150"><img
        src="https://nahr.art4muslim.net/uploads/choices/Uq19t16Za9lelRkoqGryMCMhjM592etKKyIUrXwu.jpg" width="100"></li>
    <li><input type="hidden" name="arrangement[]" value="151"><img
        src="https://nahr.art4muslim.net/uploads/choices/VSxuuu6zdArNNnquKFQr3xQBYIg8KHS0q8yRUMrv.jpg" width="100"></li>
  </ul>



  <script>
   let items = document.querySelectorAll('#items-list > li img');  // Select images
let draggedElement = null;
let startIndex = null;

// Desktop events
items.forEach(item => {
  item.setAttribute('draggable', true);  
  item.addEventListener('dragstart', dragStart);
  item.addEventListener('dragenter', cancelDefault);
  item.addEventListener('dragover', cancelDefault);
  item.addEventListener('drop', dropped);

  // Mobile touch events
  item.addEventListener('touchstart', touchStart);
  item.addEventListener('touchmove', touchMove);
  item.addEventListener('touchend', touchEnd);
});

// Desktop drag start
function dragStart(e) {
  startIndex = Array.from(e.target.parentNode.parentNode.children).indexOf(e.target.parentNode);
  draggedElement = e.target;
  e.dataTransfer.setData('text/plain', startIndex);
  e.target.style.opacity = 0.5;
}

// Desktop drop
function dropped(e) {
  cancelDefault(e);
  
  let target = e.target;
  if (target.tagName.toLowerCase() === 'img') target = target.parentNode;
  let endIndex = Array.from(target.parentNode.children).indexOf(target);

  if (endIndex !== startIndex) {
    swapElements(startIndex, endIndex);
  }
  draggedElement.style.opacity = 1;
  draggedElement = null;
}

// Mobile touch start
function touchStart(e) {
  e.preventDefault();
  startIndex = Array.from(e.target.parentNode.parentNode.children).indexOf(e.target.parentNode);
  draggedElement = e.target;
  draggedElement.style.opacity = 0.5;
}

// Mobile touch move
function touchMove(e) {
  e.preventDefault();
  let touch = e.touches[0];
  draggedElement.style.position = 'absolute';
  draggedElement.style.left = touch.pageX - 50 + 'px';  // Adjust position
  draggedElement.style.top = touch.pageY - 50 + 'px';
}

// Mobile touch end
function touchEnd(e) {
  e.preventDefault();
  let target = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
  if (target && target.tagName.toLowerCase() === 'img') {
    let endIndex = Array.from(target.parentNode.parentNode.children).indexOf(target.parentNode);
    if (endIndex !== startIndex) {
      swapElements(startIndex, endIndex);
    }
  }
  draggedElement.style.position = '';
  draggedElement.style.opacity = 1;
  draggedElement = null;
}

// Helper function to swap elements in the list
function swapElements(startIndex, endIndex) {
  const list = document.getElementById('items-list');
  const items = Array.from(list.children);
  list.insertBefore(items[startIndex], items[endIndex]);
}

// Prevent default behavior for drag events
function cancelDefault(e) {
  e.preventDefault();
  e.stopPropagation();
}


  </script>
</body>

</html>